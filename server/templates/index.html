<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SquashTerm</title>
    <link rel="stylesheet" href="/static/styles.css" />
  </head>
  <body>
    <div class="app">
      <div class="layout">
        <aside class="sidebar">
          <div class="brand">
            <img class="app-logo" src="/static/images/logo.png" alt="SquashTerm logo" />
          </div>
          <nav class="nav-menu" role="tablist">
            <button class="nav-button is-active" data-tab="media" role="tab">
              <span class="label">Media</span>
            </button>
            <button class="nav-button" data-tab="playlist" role="tab">
              <span class="label">Playlists</span>
            </button>
            <button class="nav-button" data-tab="manage" role="tab">
              <span class="label">Manage</span>
            </button>
            <button class="nav-button" data-tab="settings" role="tab">
              <span class="label">Settings</span>
            </button>
          </nav>
        </aside>

        <main class="content">
          <header class="app-header">
            <div class="title-block">
              <div class="title-bar">
                <div>
                  <img class="app-logo-sub" src="/static/images/logo.png" alt="SquashTerm logo" />
                </div>
              </div>
            </div>
          </header>

          <section class="panel is-active" id="panel-media" role="tabpanel">
            <div class="panel-header">
              <div>
                <h3>メディアライブラリ</h3>
                <p>登録されている曲一覧です。</p>
              </div>
            </div>
            <div class="media-grid" id="media-grid"></div>
          </section>

          <section class="panel" id="panel-playlist" role="tabpanel">
            <div class="panel-header">
              <div>
                <h3>プレイリスト</h3>
                <p>登録されているプレイリストです。</p>
              </div>
              <button class="primary">新規プレイリスト作成</button>
            </div>
            <div class="playlist-layout">
              <div class="playlist-list" id="playlist-list"></div>
              <div class="favorites" id="favorites"></div>
            </div>
          </section>

          <section class="panel" id="panel-manage" role="tabpanel">
            <div class="panel-header">
              <div>
                <h3>楽曲管理</h3>
                <p>yt-dlp による取り込みと ID3 タグ編集をまとめて操作。</p>
              </div>
              <div class="chip">yt-dlp連携</div>
            </div>
            <div class="manage-grid">
              <form class="card" id="import-form">
                <h4>新規楽曲追加</h4>
                <label>
                  <span>動画 URL</span>
                  <input
                    type="url"
                    id="import-url"
                    placeholder="https://www.youtube.com/watch?v=..."
                    required
                  />
                </label>
                <label class="checkbox">
                  <input type="checkbox" id="import-auto-tag" checked />
                  <span>ダウンロード後に自動でID3タグを解析</span>
                </label>
                <button type="button" class="primary" id="import-submit">ライブラリに追加</button>
                <div class="terminal">
                  <p class="terminal-title">yt-dlp 実行ログ</p>
                  <pre class="terminal-output" id="import-log">待機中...</pre>
                </div>
              </form>

              <form class="card">
                <h4>ID3タグの編集</h4>
                <label>
                  <span>対象楽曲</span>
                  <select id="tag-track-select"></select>
                </label>
                <label>
                  <span>タイトル</span>
                  <input type="text" placeholder="楽曲タイトル" />
                </label>
                <label>
                  <span>アーティスト</span>
                  <input type="text" placeholder="アーティスト名" />
                </label>
                <label>
                  <span>アルバム</span>
                  <input type="text" placeholder="アルバム名" />
                </label>
                <button type="button" class="secondary">変更内容を保存</button>
              </form>
            </div>
          </section>

          <section class="panel" id="panel-settings" role="tabpanel">
            <div class="panel-header">
              <div>
                <h3>設定</h3>
                <p>設定項目を変更します。</p>
              </div>
              <button class="secondary">設定を保存</button>
            </div>
            <div class="settings-grid">
              <div class="card">
                <h4>バージョン情報</h4>
                <ul>
                  <li>アプリ: <strong>0.1.0</strong></li>
                  <li>API: <strong>Python HTTP Server</strong></li>
                  <li>ビルド: <strong>2024.11.18</strong></li>
                </ul>
              </div>
              <div class="card">
                <h4>ストレージ</h4>
                <div class="progress">
                  <div class="progress-bar" style="width: 42%"></div>
                </div>
                <p>楽曲: 3.8GB / 9.0GB (仮)</p>
              </div>
              <div class="card">
                <h4>再生設定</h4>
                <label class="checkbox">
                  <input type="checkbox" checked />
                  <span>ネットワークからのアクセスを許可</span>
                </label>
                <label class="checkbox">
                  <input type="checkbox" />
                  <span>自動ライブラリスキャン</span>
                </label>
              </div>
            </div>
          </section>
        </main>
      </div>
    </div>

    <section class="player-overlay" id="player-overlay" aria-hidden="true">
      <div class="player-overlay-content">
        <button class="player-close" type="button" id="player-close" aria-label="閉じる">
          ×
        </button>
        <div class="player-visual">
          <img class="player-cover" id="player-cover" src="" alt="" />
        </div>
        <div class="player-bottom">
          <div class="player-info">
            <h2 id="player-title">--</h2>
            <p id="player-artist">--</p>
            <p class="player-meta" id="player-album">--</p>
          </div>
          <div class="player-controls">
            <button class="icon-button" type="button" id="player-prev" aria-label="前へ">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <rect x="4" y="5" width="3" height="14" rx="1.5" />
                <polygon points="20,5 10,12 20,19" />
              </svg>
              <span class="sr-only">前へ</span>
            </button>
            <button
              class="icon-button is-primary toggle-button"
              type="button"
              id="player-toggle"
              aria-label="再生"
            >
              <svg class="icon-play" viewBox="0 0 24 24" aria-hidden="true">
                <polygon points="8,5 19,12 8,19" />
              </svg>
              <svg class="icon-pause" viewBox="0 0 24 24" aria-hidden="true">
                <rect x="7" y="5" width="4" height="14" rx="1.5" />
                <rect x="13" y="5" width="4" height="14" rx="1.5" />
              </svg>
              <span class="sr-only">再生</span>
            </button>
            <button class="icon-button" type="button" id="player-next" aria-label="次へ">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <polygon points="4,5 14,12 4,19" />
                <rect x="17" y="5" width="3" height="14" rx="1.5" />
              </svg>
              <span class="sr-only">次へ</span>
            </button>
            <button class="icon-button" type="button" id="player-stop" aria-label="停止">
              <svg viewBox="0 0 24 24" aria-hidden="true">
                <rect x="7" y="7" width="10" height="10" rx="2" />
              </svg>
              <span class="sr-only">停止</span>
            </button>
          </div>
          <div class="player-progress">
            <span id="player-current">0:00</span>
            <input type="range" id="player-seek" min="0" max="100" value="0" />
            <span id="player-duration">0:00</span>
          </div>
        </div>
      </div>
    </section>

    <div class="mini-player" id="mini-player" aria-hidden="true">
      <div class="mini-info">
        <img class="mini-cover" id="mini-cover" src="" alt="" />
        <div>
          <p class="mini-title" id="mini-title">--</p>
          <p class="mini-artist" id="mini-artist">--</p>
        </div>
      </div>
      <div class="mini-controls">
        <button class="icon-button" type="button" id="mini-prev" aria-label="前へ">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <rect x="4" y="5" width="3" height="14" rx="1.5" />
            <polygon points="20,5 10,12 20,19" />
          </svg>
          <span class="sr-only">前へ</span>
        </button>
        <button
          class="icon-button is-primary toggle-button"
          type="button"
          id="mini-toggle"
          aria-label="再生"
        >
          <svg class="icon-play" viewBox="0 0 24 24" aria-hidden="true">
            <polygon points="8,5 19,12 8,19" />
          </svg>
          <svg class="icon-pause" viewBox="0 0 24 24" aria-hidden="true">
            <rect x="7" y="5" width="4" height="14" rx="1.5" />
            <rect x="13" y="5" width="4" height="14" rx="1.5" />
          </svg>
          <span class="sr-only">再生</span>
        </button>
        <button class="icon-button" type="button" id="mini-next" aria-label="次へ">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <polygon points="4,5 14,12 4,19" />
            <rect x="17" y="5" width="3" height="14" rx="1.5" />
          </svg>
          <span class="sr-only">次へ</span>
        </button>
        <button class="icon-button" type="button" id="mini-stop" aria-label="停止">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <rect x="7" y="7" width="10" height="10" rx="2" />
          </svg>
          <span class="sr-only">停止</span>
        </button>
        <button class="icon-button" type="button" id="mini-expand" aria-label="画面を開く">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path
              d="M8 4H4v4M16 4h4v4M20 16v4h-4M4 16v4h4"
              fill="none"
              stroke="currentColor"
              stroke-linecap="round"
              stroke-width="2"
            />
          </svg>
          <span class="sr-only">画面を開く</span>
        </button>
      </div>
      <div class="mini-progress">
        <input type="range" id="mini-seek" min="0" max="100" value="0" />
      </div>
    </div>

    <audio id="audio-player"></audio>

    <script src="/static/app.js"></script>
  </body>
</html>
